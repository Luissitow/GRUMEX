function iniciarApp() {
    navegacionFija();
    menuActivo();
    carruselheader();
    mensaje();
}

function menuActivo() {
    const botonNavegacion = document.querySelector(".navegacion_estatica__buttom");
    const menuNavegacion = document.querySelector(".navegacion_estatica__nav");

    if (botonNavegacion && menuNavegacion) {
        botonNavegacion.addEventListener("click", () => {
            menuNavegacion.classList.toggle("active");
        });
    }
}

function navegacionFija() {
    const navegacion = document.querySelector(".navegacion_estatica");
    const whatsapp = document.querySelector(".whatsapp");
    const headerServicios = document.querySelector(".header_servicios");

    window.addEventListener("scroll", () => {
        if (headerServicios.getBoundingClientRect().bottom < 0) {
            navegacion.classList.add("fijo");
            whatsapp.classList.add("fijo");
        } else {
            navegacion.classList.remove("fijo");
            whatsapp.classList.remove("fijo");
        }
    });
}

function carruselheader() {
    const carrusel = document.querySelector("#carruselheader");
    if (carrusel) {
        let items = document.querySelectorAll(".hslider .carrusel-header__list .hitem");
        let nextBtn = document.getElementById("hnext");
        let prevBtn = document.getElementById("hprev");
        let totalItems = items.length;
        let currentIndex = 0;

        // Evento para cambiar a la siguiente imagen
        nextBtn.onclick = function() {
            currentIndex++;
            if (currentIndex >= totalItems) {
                currentIndex = 0;
            }
            actualizarCarrusel();
        };

        // Evento para cambiar a la imagen anterior
        prevBtn.onclick = function() {
            currentIndex--;
            if (currentIndex < 0) {
                currentIndex = totalItems - 1;
            }
            actualizarCarrusel();
        };

        // Función que actualiza el carrusel
        function actualizarCarrusel() {
            document.querySelector(".hslider .hitem.hactive").classList.remove("hactive");
            items[currentIndex].classList.add("hactive");
        }

        // Cambio automático cada 3 segundos
        let autoSlide = setInterval(() => {
            nextBtn.click();
        }, 3000);

        // Detener el cambio automático cuando se navega manualmente
        nextBtn.addEventListener("click", () => {
            clearInterval(autoSlide);
            autoSlide = setInterval(() => {
                nextBtn.click();
            }, 3000);
        });
        prevBtn.addEventListener("click", () => {
            clearInterval(autoSlide);
            autoSlide = setInterval(() => {
                nextBtn.click();
            }, 3000);
        });
    }
}

function mensaje() {
    const parrafo = document.getElementById("parrafo");
    if (parrafo) {
        setTimeout(() => {
            parrafo.style.opacity = 0;
            setTimeout(() => {
                parrafo.remove();
            }, 1000);
        }, 5000);
    }
}

document.addEventListener("DOMContentLoaded", function() {
    iniciarApp();
});
